# ShopAPI - Backend для магазина техники

## Описание проекта

**ShopAPI** — это полноценный сервис, бэкенд для магазина техники, разработанный с использованием Java Spring Boot. Проект предоставляет полноценный REST API для взаимодействия с данными клиентов, товаров, поставщиков, изображений и адресов.

С помощью этого API можно выполнять операции CRUD для всех сущностей магазина, включая добавление, удаление, изменение данных и поиск по различным параметрам.

### Реализованные сущности:
- **Клиенты**: Информация о клиентах, таких как имя, фамилия, дата рождения и адрес.
- **Товары**: Детали о товарах, включая название, категорию, цену и количество на складе.
- **Поставщики**: Информация о поставщиках товаров.
- **Изображения товаров**: Сохранение изображений для каждого товара.
- **Адреса**: Адреса клиентов и поставщиков.

### Стандарты:
- API реализовано в стиле RESTful.
- Документация Swagger доступна по адресу: `http://localhost:8082/swagger/index.html`.
- Все запросы и ответы соответствуют спецификации OpenAPI.

### Технологии:
- **Java** (Spring Boot)
- **Gradle Kotlin DSL**
- **Liquibase** для миграции базы данных
- **MapStruct** для преобразования DTO в сущности и наоборот
- **PostgreSQL** для хранения данных
- **Docker** и **Docker Compose** для развертывания проекта

## Запуск проекта с использованием Docker

### Требования:
- Docker
- Docker Compose
- Ubuntu (рекомендуется для корректной работы с `wait-for-it.sh`)

### Примечание:
Для корректной работы проекта рекомендуется использовать **Ubuntu** в качестве операционной системы, так как в проекте используется скрипт `wait-for-it.sh`, который может работать нестабильно в других ОС.

## Структура базы данных

Проект использует реляционную модель для хранения данных. Все данные хранятся в PostgreSQL и представляют собой несколько таблиц с внешними ключами, которые обеспечивают целостность данных.

### Основные сущности:
1. **client** (Клиенты)
2. **product** (Товары)
3. **supplier** (Поставщики)
4. **images** (Изображения товаров)
5. **address** (Адреса)

### Пример запросов:
- **POST /api/v1/clients** — Добавить нового клиента.
- **PATCH /api/v1/clients/{id}** — Изменить адрес клиента.
- **PATCH /api/v1/suppliers/{id}** — Изменить адрес поставщика.
- **GET /api/v1/images** — Получить все изображения с пагинацией.
- **POST /api/v1/address** — Создать новый адрес.
- И другие

Все запросы поддерживают валидацию данных и соответствуют HTTP статусам:
- **200 OK** — Успех.
- **201 Created** — Создано.
- **204 No Content** — Удалено.
- **400 Bad Request** — Ошибка запроса.
- **404 Not Found** — Не найдено.
- **500 Internal Server Error** — Внутренняя ошибка сервера.



### Шаги для запуска:
1. Клонируйте этот репозиторий:
   ```bash
   git clone https://github.com/vivianwi/shopapiapp
   ```
2. Перейдите в корневую директорию проекта:
   ```bash
   cd shopapiapp
   ```
3. Выполните команду для сборки и запуска контейнеров:
   ```bash
   docker-compose up --build
   ```
- Документация будет доступна по ссылке `http://localhost:8082/swagger/index.html`

#### Если при запуске возникли проблемы, попробуйте выполнить следующие шаги:
   ```bash
   docker-compose down --volumes --remove-orphans
   ```

   ```bash
   docker-compose up --build
   ```
